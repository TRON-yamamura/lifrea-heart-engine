name: Check OpenWeather Secret
on: workflow_dispatch

jobs:
  check:
    runs-on: ubuntu-latest
    steps:
      - name: Check OPENWEATHER_API_KEY visibility
        uses: actions/github-script@v6
        env:
          OPENWEATHER_API_KEY: ${{ secrets.OPENWEATHER_API_KEY }}
        with:
          script: |
            const key = process.env.OPENWEATHER_API_KEY || ''
            const crypto = require('crypto')
            console.log('âœ… Secret exists:', !!key)
            console.log('ðŸ”‘ Key length:', key.length)
            console.log('ðŸ§© Hash preview:',
              crypto.createHash('sha256').update(key).digest('hex').slice(0,16))
